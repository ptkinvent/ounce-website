<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Ounce!</title>
    <style>
        body {
            width: 35em;
            margin: 0 auto;
            font-family: Tahoma, Verdana, Arial, sans-serif;
        }
    </style>
</head>



<body>
    <h1>Welcome to Ounce!</h1>
    <p>If you see this page, the nginx web server is successfully installed and
    working. Further configuration is required.</p>

    <p>For online documentation and support please refer to
    <a href="http://nginx.org/">nginx.org</a>.<br/>
    Commercial support is available at
    <a href="http://nginx.com/">nginx.com</a>.</p>

    <div id="content">
    </div>

    <p><em>Thank you for using nginx.</em></p>

    <script type="module">
        import * as THREE from 'https://cdn.skypack.dev/three@0.132.2';

        import { OrbitControls } from 'https://cdn.skypack.dev/three@0.132.2/examples/jsm/controls/OrbitControls.js';
        import { vertices } from './points.js'

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(document.getElementById('content').clientWidth, document.getElementById('content').clientWidth*2/3);
        document.getElementById('content').appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);

        //const vertices = [];
        //for (let i=0; i<5e6; i++) {
        //    const x = THREE.MathUtils.randFloatSpread(3e4);
        //    const y = THREE.MathUtils.randFloatSpread(3e4);
        //    const z = THREE.MathUtils.randFloatSpread(3e4);
        //    vertices.push(x, y, z);
        //}

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
        const material = new THREE.PointsMaterial({ color: 0x00FF00 });
        const points = new THREE.Points(geometry, material);
        scene.add(points);
        camera.position.x = -5;
        camera.position.y = -5;
        //camera.position.z = 5;
        controls.update();

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
            // points.rotation.x += 0.01;
            // points.rotation.y += 0.001;
        }
        animate();
    </script>
</body>
</html>
